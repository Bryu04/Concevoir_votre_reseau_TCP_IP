Configurez votre réseau pour assurer la communication

Identifiez votre machine au sein d’un réseau local

Appréhendez les principes de la communication

Dans la partie précédente, vous avez appris à créer physiquement un réseau : choisir les éléments qui le composent et les relier. On pourrait penser qu’il suffit maintenant d’envoyer des messages pour que tout fonctionne. Mais pas du tout !

Imaginez que vous soyez dans une salle de réunion avec 20 personnes que vous ne connaissez pas. Chacun souhaite s’exprimer. La réunion commence et soudain la lumière s’éteint : une panne d’électricité généralisée vient de se produire. Vous vous retrouvez tous dans le noir complet mais décidez de poursuivre la réunion malgré tout. Tout doit donc se faire à l’oral.

Les débuts sont un peu chaotiques car les gens se coupent la parole, parlent trop fort ou en même temps que d’autres. Puis au fur et à mesure, vous établissez collectivement et intuitivement des règles pour que chacun puisse délivrer son message sans avoir besoin de le répéter.

Le premier réflexe que vous prenez tous c’est d’annoncer, avant de parler, qui vous êtes et à qui vous souhaitez parler. Oui, car n’oubliez pas que vous ne voyez personne et personne ne vous voit. Impossible donc de savoir qui parle.

Cette situation nous apprend que, pour communiquer correctement, quelle que soit la situation, il est indispensable de connaître :

  - La source du message : qui parle ?

  - Le/les destinataires du message : à qui ?

  - Le contenu du message : pour dire quoi ?

Les machines ont besoin des mêmes informations pour assurer la communication informatique au sein d’un réseau. Et pour identifier la source et la destination d’un message, on utilise différents mécanismes dont l’adresse MAC.

Identifiez l’adresse MAC de votre machine

Pour envoyer un colis, vous devez indiquer le destinataire sur le colis. Ce destinataire est identifié par ses nom et prénom.

En informatique, le principe est le même sauf que c’est l’adresse MAC qui sert à identifier les émetteurs et récepteurs des messages.

Pour être plus exact, l’adresse MAC identifie non pas la machine, mais la carte réseau, car c’est elle qui envoie et reçoit les messages. Si une machine a plusieurs cartes réseaux, elle aura donc plusieurs adresses MAC.

Voici quelques caractéristiques importantes de cette adresse MAC :

  - Elle est non modifiable car associée à une carte réseau dès sa fabrication en usine. Certains outils 
    logiciels existent malgré tout pour la modifier, mais il s’agit de cas de figure très spécifiques qui ne nous 
    concernent pas ici.

  - Elle est unique dans le monde.

  - Elle s’écrit en hexadécimal, un système numérique qui utilise 16 caractères (à la place de 10 en système décimal).

  - Elle est composée de 6 octets.

Un octet ? Qu’est-ce que c’est ?

En informatique, les machines utilisent le système binaire. Elles ne comprennent donc que les valeurs “0” et “1”. Ce type de valeur s’appelle un bit. Tous les messages qui transitent sur le réseau ne sont que de longues suites de bits. Un groupe de 8 bits à la suite s’appelle un octet. 

L’adresse MAC écrite sur 6 octets pourrait donc aussi s’écrire sous la forme de 48 bits (6x8=48).

Les adresses MAC sont définies par les fabricants de carte réseaux, ce ne sera donc pas à vous de les configurer sur votre réseau. En revanche, vous pourrez avoir besoin de vérifier les adresses MAC associées à vos machines.

Pour cela, sous Windows 10, vous pouvez passer par l’invite de commandes. L’invite de commandes permet de réaliser certaines actions sur votre système directement en tapant des commandes. Pour y accéder, il suffit d’entrer “cmd” dans la barre de recherche Windows.

Dans notre cas, on souhaite récupérer les informations de configuration des cartes réseau, grâce à la commande suivante :

ipconfig /all

En exécutant cette commande, on peut voir s’afficher beaucoup de cartes réseaux. C’est normal ! Un ordinateur est souvent équipé de beaucoup de cartes réseau : une pour le Wi-Fi, une pour le Bluetooth, une pour Ethernet, et même des cartes réseaux virtuelles !

Voici le résultat que j’obtiens lorsque j’utilise cette commande sur mon ordinateur :

L’adresse MAC associée à la carte réseau sans fil de mon ordinateur est E4-F8-9C-D6-78-32.

Vous voyez, elle s’écrit sur 12 caractères hexadécimaux regroupés par 2, les paires étant séparées par un tiret.

Besoin de faire le point sur le système hexadécimal ? Rendez-vous dans ce cours sur l'électronique numérique.

Ce qu’il faut retenir, c’est qu’on utilise souvent le système hexadécimal à la place du binaire pour écrire des informations numériques.

Ah bon, pourquoi ?

Parce que c’est plus pratique ! Un message binaire est constitué de longues suites de 0 et 1 qui peuvent être raccourcies en hexadécimal ! Par exemple, une adresse MAC est composée de 12 caractères hexadécimaux qui, une fois convertis, feraient 48 caractères binaires ! Avouez que ce n’est pas très pratique à écrire. :)

Une adresse MAC est composée de 2 parties :

- La première moitié (les 3 premiers octets) identifie le fabricant de la carte réseau.

- La deuxième moitié identifie la carte réseau elle-même.

Je peux même vérifier sur ce site (en anglais : https://dnschecker.org/mac-lookup.php) quel est le fabricant de ma carte réseau. J’indique simplement mon adresse MAC et à partir des 3 premiers octets le site est capable de retrouver à quel constructeur ils correspondent.

À vous de jouer !

Maintenant que je vous ai montré comment identifier l’adresse MAC sur une machine, essayez de retrouver :

 - l’adresse MAC d’une de vos cartes réseau ;

 - le fabricant de cette carte réseau.

En résumé

- Pour communiquer, les machines ont besoin de règles. La règle la plus importante à instaurer est d’identifier 
  chaque équipement avec une adresse.

- Chaque message qui transite sur le réseau porte l’adresse de la source et du destinataire du message.

- L’adresse MAC est un identifiant unique. Cela signifie que deux équipements dans le monde ne pourront jamais 
  avoir la même adresse MAC.

- Une adresse MAC est associée à chaque carte réseau d’une machine. Une même machine peut donc avoir plusieurs 
  adresses MAC.

- L’adresse MAC s’écrit sur 6 octets et n’est pas à définir par le technicien : elle est inscrite dans le 
  matériel à sa sortie d’usine.

Vous savez désormais identifier votre machine dans un réseau local. Passez au chapitre suivant pour découvrir comment initier la communication !

#################################################################################################################

Initiez la communication

Envoyez des messages

Dans le chapitre précédent, vous avez appris à identifier vos machines grâce à l’adresse MAC. Il vous faut désormais les faire communiquer. Communiquer, c’est échanger des messages. Ces messages s’appellent des paquets dans le monde des réseaux. 

Pour vérifier que la communication fonctionne entre deux machines, vous allez donc générer un paquet sur la première machine, et l’envoyer sur la deuxième.

Heuuuu... Et comment je fais concrètement ?

Pas de panique ! Voyons cela sur Packet Tracer dans la vidéo ci-dessous :

Simulez une communication sur votre réseau avec Packet Tracer

Vous revoilà dans votre entreprise de conseil en réseaux d’entreprise. Après avoir longuement réfléchi à votre proposition précédente, votre client, M. Falman, accepte votre devis et vous demande de réaliser l’architecture que vous lui aviez proposé.

Pour rappel, voilà à quoi ressemblait l'architecture complète, avec les machines de votre client à gauche et celles de son associé, l’entreprise Cyclade, à droite :

Pour cette mission, votre manager vous propose de travailler en binôme avec un collègue plus expérimenté. Ce dernier a déjà réalisé de nombreux projets sur le terrain. Il vous propose de vous occuper de la partie configuration réseau, tandis que lui s’occupera de l’achat et de l’installation du matériel.

Pour préparer au mieux cette intervention, vous décidez de tout simuler avec Packet Tracer. Vous aviez déjà réalisé toute l’architecture pour établir un devis au client. Il ne vous reste plus qu’à tester la communication entre les machines.

Le client vous précise qu’il souhaite conserver ses adresses IP actuelles :

  - 1.1.1.1 pour le serveur ;

  - 1.1.1.2 pour le PC fixe ;

  - 1.1.1.3 pour le PC portable.

À cette étape, les adresses IP ne sont pas nécessaires pour l’acheminement des paquets, car le switch comprend uniquement les adresses MAC. Mais pour générer un paquet et donc tester la communication, les machines doivent obligatoirement avoir une adresse IP. Nous verrons dans le chapitre suivant de quoi il s’agit exactement.

À vous de jouer !

Affectez les adresses IP aux 3 machines du client et testez la communication.

Vous devez générer un paquet sur le PC fixe vers le serveur, et vous assurer qu’il arrive à destination.

Corrigé

Vous avez réussi à créer des communications au sein d’un réseau local. Bravo !

Grâce à l’adresse MAC de vos machines, le switch est capable d’identifier d’où vient un message et de l’envoyer dans la bonne direction, c’est-à-dire sur le bon port.

Alors maintenant c’est bon ? Mes machines peuvent communiquer avec n’importe quelle autre machine et communiquer vers Internet ?

Eh non justement ! Pour le moment, vous ne pouvez faire communiquer des machines que dans un réseau local.

Pour que vos machines aient accès à Internet ou simplement à un autre réseau, il faut que les paquets puissent traverser les réseaux. Et pour cela, l’adresse MAC ne suffit pas. Il va vous falloir un autre type d’adresse qu’on a un peu évoqué et utilisé : l’adresse IP.

En résumé

- Les communications au sein d’un réseau local se font grâce à l’adresse MAC. 

- Le switch, lorsqu’il reçoit un paquet, est capable de déterminer, grâce à l’adresse MAC, sur lequel de ses 
  ports transmettre le paquet.

- Pour générer un paquet, on a cependant besoin d’affecter une adresse IP aux machines.

Vous avez configuré des communications dans un réseau local : bravo ! Rendez-vous dans le chapitre suivant pour en savoir plus sur l’adresse IP.

#################################################################################################################

Identifiez votre machine au sein de plusieurs réseaux

Définissez l’adresse IPv4 de votre machine

Reprenons notre analogie avec le courrier. Lorsque vous voulez envoyer un colis, vous devez écrire plusieurs informations pour qu'il arrive à bon port :

    - les nom et prénom du destinataire ;

    - l’adresse postale du destinataire.

Ces informations identifient le destinataire et elles sont obligatoires. Les nom et prénom sont utiles localement pour que le facteur dépose le colis dans la bonne boîte à lettres. L’adresse postale est utile à plus grande échelle, pour que le centre de tri postal sache dans quels pays, ville et rue acheminer le colis.

Lorsque vous envoyez un paquet sur Internet, c’est presque la même chose. Le paquet doit toujours contenir en en-tête :

    - une adresse locale : l’adresse MAC ;

    - une adresse globale : l’adresse IP (Internet Protocol).

En informatique, un paquet contient toujours les adresses de la source et du destinataire du message. Pour le courrier postal, seule l’adresse du destinataire est obligatoire.

Il existe différentes versions d’IP. La plus utilisée est encore actuellement la version 4, abrégée en IPv4. 

Comme pour l’adresse MAC, l’adresse IPv4 a des caractéristiques bien précises :

- Elle peut être publique ou privée :

       - les adresses IP privées sont utilisées sur les LAN (réseaux domestiques, d’entreprise…) ;

       - les adresses IP publiques sont souvent réservées aux opérateurs de télécommunication sur les réseaux de 
         type MAN/WAN (réseaux nationaux et internationaux).

- Elle est modifiable. C’est même à vous de la définir, contrairement à l’adresse MAC.

- Elle s’écrit sur 4 octets en décimal (pas d'hexadécimal, cette fois).

Voilà à quoi ressemble une adresse IPv4 : 172.16.254.1

Vous voyez qu’elle est composée de 4 parties (4 octets) séparées par un point. Chaque partie étant un octet soit 8 bits. Chaque partie peut prendre une valeur entre 0 et 255.

N’oubliez pas qu’une fois configurée dans la machine, cette adresse IP sera convertie en binaire car les machines ne parlent qu’en binaire. Or en binaire, avec 8 bits, on ne peut compter que de 0 à 255.

Vous l’aurez compris, à cette étape du cours il devient essentiel de savoir convertir les nombres décimaux en binaire. 

L’adresse IP permet d’identifier la localisation géographique des machines, ou au moins de savoir à quel réseau elles appartiennent, contrairement à l’adresse MAC. Grâce à elle, on peut souvent localiser les émetteurs et récepteurs des messages qui transitent dans un réseau.

Définissez le plan d’adressage de votre réseau

Pour créer votre propre réseau, vous devrez choisir les adresses IP que vous allez affecter à vos machines. C’est ce qu’on appelle faire un plan d’adressage. Et pour avoir un plan d’adressage cohérent, vous ne devrez pas choisir vos adresses au hasard.

Si vous travaillez dans un seul et même réseau, vous devrez veiller à :

 - ne pas attribuer une adresse IP déjà existante sur ce réseau ;

 - attribuer des adresses IP qui soient toutes dans la même plage d’adresses réseau.

Une plage d’adresses ? Mais qu’est-ce que c’est ?

Une plage d’adresses est l’ensemble des adresses IP consécutives qui sont attribuables aux machines d’un même réseau. 

On peut faire le parallèle avec les codes postaux d’un département. Prenons le Puy-de-Dôme, identifié par le numéro départemental 63. Tous les codes postaux des communes situées dans ce département doivent être entre 63000 et 63999 : c’est la plage des codes postaux attribuables.

Mais alors, dans un réseau informatique, comment être sûr que 2 machines ont des adresses IP dans la même plage ?

La réponse tient en un mot : le masque.

Une adresse IP contient toujours :

   - une partie qui identifie le réseau ;

   - une partie qui identifie la machine.

Le masque est le délimiteur entre la partie réseau et la partie machine. C’est ce qui vous permet de vérifier que deux machines sont bien dans la même plage réseau.

Prenons un exemple pour illustrer cela : 172.16.254.1/8

Ici, le masque nous indique que les 8 premiers bits de cette adresse IP (172) sont ceux qui identifient le réseau, et donc que les 24 derniers (16.254.1) identifient la machine :

Par la même occasion, le masque nous permet d’en déduire l’adresse réseau. Cette adresse réseau s’obtient en prenant l’adresse IP et en remplaçant par des “0” les bits identifiant la machine. Cela donne ici : 172.0.0.0

OK, super, mais à quoi cela peut-il être utile ?

C’est utile car certains équipements que vous configurerez peuvent avoir besoin de cette adresse réseau. Vous devez donc être en mesure de la trouver.

Maintenant, pour savoir si 2 machines sont dans le même réseau IP, c’est-à-dire dans la même plage réseau, il suffit de comparer leurs adresses réseau :

  - Si elles sont identiques, les machines sont dans le même réseau IP. 

  - Si elles sont différentes, les machines sont dans un réseau IP différent.

Vous avez compris l’idée ? ;)

Prenons maintenant un cas concret pour illustrer cela.

Imaginez 2 machines dans un réseau point-à-point, c’est-à-dire reliées sans switch mais directement par un câble, avec la configuration IP suivante :

L’adressage des machines est le suivant :

   - La machine A avec l’adresse : 192.168.10.1/24.

   - La machine B avec l’adresse : 192.168.20.3/24.

Le masque nous permet de dire que :

   - les 24 premiers bits sont l’identificateur du réseau ;

   - les 8 derniers bits sont l'identificateur de la machine.

On peut donc en déduire que :

   - la machine A est sur le réseau 192.168.10.0 ;

   - la machine B est sur le réseau 192.168.20.0.

Les 2 machines étant sur 2 réseaux différents, elles ne peuvent pas communiquer.

Si on souhaite conserver le masque en /24, Les adresses IP des machines sont donc mal choisies. Il aurait plutôt fallu affecter à la machine B l’adresse 192.168.10.3/24, par exemple.

Si vous intervenez sur un réseau existant, vous n’aurez qu’à utiliser le masque de ce réseau. Si, au contraire, vous concevez un nouveau réseau, vous devrez définir vous-même son masque.

Ah bon ? Mais comment je fais ?

Vous définirez le masque de votre réseau en fonction du nombre de machines prévues. Plus un masque a une grande valeur, moins vous pourrez mettre de machines dans votre réseau.

Voyons cela sur un schéma : 172.16.254.1/8
                            172.16.254.1/16
                            172.16.254.1/24

Vous voyez qu’un masque en /8 laisse 24 bits pour identifier des machines. Avec 24 bits, on obtient plus de 16 millions (2^24) d’adresses possibles. À l’opposé, un masque en /24 ne laisse que 8 bits pour des adresses machines, et donc seulement 256 (2^8) adresses possibles.

Attention, Il faut aussi faire la différence entre le nombre d’adresses IP total et le nombre d’adresses IP attribuables. Par exemple, si on dispose de 8 bits pour les adresses machines, on peut créer au total 256 adresses IP, mais seulement 254 adresses IP attribuables.

Ah bon ? Mais pourquoi ?

Dans une plage réseau, la première et la dernière adresse ne sont jamais attribuables à une machine, car elles ont une utilité bien spécifique.

  - La première est l’adresse réseau (c’est ce que nous avons vu plus haut quand nous avons parlé du masque).

  - La dernière est l’adresse de diffusion ou de broadcast, en anglais. Elle sert à envoyer un message à toutes 
    les machines d’un réseau en même temps. Elle ne peut donc pas être affectée à une machine précise.

Quand on souhaite connaître le nombre de machines que l’on peut avoir dans un réseau, il faut donc calculer le nombre d’adresses totales et retrancher 2.

Dans ces exemples, j’ai pris uniquement des masques dont les valeurs sont des multiples de 8 car ce sont les plus courants. Mais en théorie, vous pouvez tout à fait prendre des valeurs entre 1 et 31.

Dernière information importante concernant les masques : ils peuvent s’écrire de 2 manières.

Par exemple, voici le même masque écrit différemment :

  - /24, c’est la notation que nous avons vue, qu’on appelle notation CIDR (Classless Inter-Domain Routing) ;

  - 255.255.255.0, c’est l’ancienne notation qu’on trouve encore très souvent.

Pour comprendre le lien entre les 2, il faut passer par le binaire. Si on convertit notre masque 255.255.255.0 en binaire, on obtient 11111111.11111111.11111111.00000000. Ce masque binaire a ses 24 premiers bits à 1, voilà pourquoi ce masque peut s’écrire simplement : /24.

La notation CIDR a remplacé la notation standard pour plus de simplicité et de flexibilité. Initialement, pour créer un réseau, on n’avait que 3 tailles possibles : des réseaux de 254, 65 534 ou 16 777 204 machines qui correspondent respectivement aux masques 255.255.255.0, 255.255.0.0 et 255.0.0.0. Si on prévoyait un réseau avec 3 000 machines, on était obligé de prendre un réseau ayant pour masque 255.255.0.0 et acceptant jusqu’à 65 534 machines.

Le système CIDR a permis d’être plus flexible, en autorisant des masques personnalisés et non surdimensionnés pour les besoins du réseau.

Attribuez des adresses IP aux machines de votre réseau

Vous voilà de retour dans votre mission pour le compte de l'auto-école Tinos. Votre binôme de travail vous indique qu’il faut changer les adresses IP actuellement définies sur les 3 machines de Tinos. Il vous précise que le serveur devra avoir comme adresse IP 192.168.0.1/24. C'est à vous de choisir correctement les adresses IP des 2 autres machines.

Pour l’instant, vous n’intervenez pas sur les machines de Cyclade.

Pour rappel, voici l’architecture :

Pour tester la communication entre 2 machines, vous savez déjà comment générer un paquet sous Packet Tracer. Il existe cependant une autre méthode applicable sur tous les systèmes : la commande ping. Cette commande est universelle et permet d’envoyer un message de test vers une autre machine pour vérifier qu’elle répond bien.

Cette commande doit s’utiliser sur la machine qui va envoyer le message ping en précisant quelle est l’adresse IP de la machine destinataire.

Par exemple, si je souhaite vérifier que la communication fonctionne entre ma machine et un serveur Google ayant l’adresse IP 8.8.8.8, dans mon invite de commandes je dois entrer :

ping 8.8.8.8

Si j’obtiens une réponse, cela signifie que la communication fonctionne.

Vous pouvez aussi utiliser la commande ping sur les machines de votre réseau virtuel sous PacketTracer.

Pour cela :

Cliquez sur une des machines terminales de votre réseau virtuel.

Allez dans l’onglet “Desktop”.

Cliquez sur “Command Prompt”.

Vous obtenez un équivalent de l’invite de commandes Windows qui vous permet d’utiliser des commandes comme ping.

À vous de jouer !

 1. Configurez l’adresse IP des 3 machines du réseau de l'auto-école Tinos pour qu’elles soient sur le même 
    réseau IP. Rappel : le serveur doit avoir l’adresse IP 192.168.0.1/24.

 2. Testez la communication entre ces machines.

Corrigé

L’IP fournie étant 192.168.0.1/24, la partie réseau est sur 24 bits, ce qui laisse 8 bits d’IP attribuables aux machines.

Vous pouviez donc choisir des adresses IP allant de 192.168.0.2/24 à 192.168.0.254/24

Et pourquoi pas 192.168.0.255 ?

Parce que 192.168.0.255 est l’adresse de broadcast, elle n’est donc pas attribuable, tout comme l’adresse 192.168.0.0 qui est l’adresse du réseau. N’oubliez pas : vous ne pouvez jamais attribuer la première et la dernière adresse d’une plage réseau.

Jusqu’à maintenant nous avons uniquement parlé d’un certain type d’adresses IP : les adresses IPv4. Malheureusement, vu l’ampleur d’Internet, il n’est plus possible d’affecter des adresses IPv4 uniques à chaque machine connectée. Ces adresses vont peu à peu être remplacées par des adresses IPv6, qui, de par leur structure (128 bits au lieu de 32 bits) permettront d’adresser toutes les machines connectées du monde.

Dans ce cours, nous nous limiterons cependant à IPv4 car ce type d’adresse continuera d’être utilisé dans les réseaux LAN. Les IPv6, elles, seront surtout nécessaires dans les réseaux WAN/MAN.

