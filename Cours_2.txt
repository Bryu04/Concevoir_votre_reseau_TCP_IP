Configurez votre rÃ©seau pour assurer la communication

Identifiez votre machine au sein dâ€™un rÃ©seau local

ApprÃ©hendez les principes de la communication

Dans la partie prÃ©cÃ©dente, vous avez appris Ã  crÃ©er physiquement un rÃ©seau : choisir les Ã©lÃ©ments qui le composent et les relier. On pourrait penser quâ€™il suffit maintenant dâ€™envoyer des messages pour que tout fonctionne. Mais pas du tout !

Imaginez que vous soyez dans une salle de rÃ©union avec 20 personnes que vous ne connaissez pas. Chacun souhaite sâ€™exprimer. La rÃ©union commence et soudain la lumiÃ¨re sâ€™Ã©teint : une panne dâ€™Ã©lectricitÃ© gÃ©nÃ©ralisÃ©e vient de se produire. Vous vous retrouvez tous dans le noir complet mais dÃ©cidez de poursuivre la rÃ©union malgrÃ© tout. Tout doit donc se faire Ã  lâ€™oral.

Les dÃ©buts sont un peu chaotiques car les gens se coupent la parole, parlent trop fort ou en mÃªme temps que dâ€™autres. Puis au fur et Ã  mesure, vous Ã©tablissez collectivement et intuitivement des rÃ¨gles pour que chacun puisse dÃ©livrer son message sans avoir besoin de le rÃ©pÃ©ter.

Le premier rÃ©flexe que vous prenez tous câ€™est dâ€™annoncer, avant de parler, qui vous Ãªtes et Ã  qui vous souhaitez parler. Oui, car nâ€™oubliez pas que vous ne voyez personne et personne ne vous voit. Impossible donc de savoir qui parle.

Cette situation nous apprend que, pour communiquer correctement, quelle que soit la situation, il est indispensable de connaÃ®tre :

  - La source du message : qui parle ?

  - Le/les destinataires du message : Ã  qui ?

  - Le contenu du message : pour dire quoi ?

Les machines ont besoin des mÃªmes informations pour assurer la communication informatique au sein dâ€™un rÃ©seau. Et pour identifier la source et la destination dâ€™un message, on utilise diffÃ©rents mÃ©canismes dont lâ€™adresse MAC.

Identifiez lâ€™adresse MAC de votre machine

Pour envoyer un colis, vous devez indiquer le destinataire sur le colis. Ce destinataire est identifiÃ© par ses nom et prÃ©nom.

En informatique, le principe est le mÃªme sauf que câ€™est lâ€™adresse MAC qui sert Ã  identifier les Ã©metteurs et rÃ©cepteurs des messages.

Pour Ãªtre plus exact, lâ€™adresse MAC identifie non pas la machine, mais la carte rÃ©seau, car câ€™est elle qui envoie et reÃ§oit les messages. Si une machine a plusieurs cartes rÃ©seaux, elle aura donc plusieurs adresses MAC.

Voici quelques caractÃ©ristiques importantes de cette adresse MAC :

  - Elle est non modifiable car associÃ©e Ã  une carte rÃ©seau dÃ¨s sa fabrication en usine. Certains outils 
    logiciels existent malgrÃ© tout pour la modifier, mais il sâ€™agit de cas de figure trÃ¨s spÃ©cifiques qui ne nous 
    concernent pas ici.

  - Elle est unique dans le monde.

  - Elle sâ€™Ã©crit en hexadÃ©cimal, un systÃ¨me numÃ©rique qui utilise 16 caractÃ¨res (Ã  la place de 10 en systÃ¨me dÃ©cimal).

  - Elle est composÃ©e de 6 octets.

Un octet ? Quâ€™est-ce que câ€™est ?

En informatique, les machines utilisent le systÃ¨me binaire. Elles ne comprennent donc que les valeurs â€œ0â€ et â€œ1â€. Ce type de valeur sâ€™appelle un bit. Tous les messages qui transitent sur le rÃ©seau ne sont que de longues suites de bits. Un groupe de 8 bits Ã  la suite sâ€™appelle un octet. 

Lâ€™adresse MAC Ã©crite sur 6 octets pourrait donc aussi sâ€™Ã©crire sous la forme de 48 bits (6x8=48).

Les adresses MAC sont dÃ©finies par les fabricants de carte rÃ©seaux, ce ne sera donc pas Ã  vous de les configurer sur votre rÃ©seau. En revanche, vous pourrez avoir besoin de vÃ©rifier les adresses MAC associÃ©es Ã  vos machines.

Pour cela, sous Windows 10, vous pouvez passer par lâ€™invite de commandes. Lâ€™invite de commandes permet de rÃ©aliser certaines actions sur votre systÃ¨me directement en tapant des commandes. Pour y accÃ©der, il suffit dâ€™entrer â€œcmdâ€ dans la barre de recherche Windows.

Dans notre cas, on souhaite rÃ©cupÃ©rer les informations de configuration des cartes rÃ©seau, grÃ¢ce Ã  la commande suivante :

ipconfig /all

En exÃ©cutant cette commande, on peut voir sâ€™afficher beaucoup de cartes rÃ©seaux. Câ€™est normal ! Un ordinateur est souvent Ã©quipÃ© de beaucoup de cartes rÃ©seau : une pour le Wi-Fi, une pour le Bluetooth, une pour Ethernet, et mÃªme des cartes rÃ©seaux virtuelles !

Voici le rÃ©sultat que jâ€™obtiens lorsque jâ€™utilise cette commande sur mon ordinateur :

Lâ€™adresse MAC associÃ©e Ã  la carte rÃ©seau sans fil de mon ordinateur est E4-F8-9C-D6-78-32.

Vous voyez, elle sâ€™Ã©crit sur 12 caractÃ¨res hexadÃ©cimaux regroupÃ©s par 2, les paires Ã©tant sÃ©parÃ©es par un tiret.

Besoin de faire le point sur le systÃ¨me hexadÃ©cimal ? Rendez-vous dans ce cours sur l'Ã©lectronique numÃ©rique.

Ce quâ€™il faut retenir, câ€™est quâ€™on utilise souvent le systÃ¨me hexadÃ©cimal Ã  la place du binaire pour Ã©crire des informations numÃ©riques.

Ah bon, pourquoi ?

Parce que câ€™est plus pratique ! Un message binaire est constituÃ© de longues suites de 0 et 1 qui peuvent Ãªtre raccourcies en hexadÃ©cimal ! Par exemple, une adresse MAC est composÃ©e de 12 caractÃ¨res hexadÃ©cimaux qui, une fois convertis, feraient 48 caractÃ¨res binaires ! Avouez que ce nâ€™est pas trÃ¨s pratique Ã  Ã©crire. :)

Une adresse MAC est composÃ©e de 2 parties :

- La premiÃ¨re moitiÃ© (les 3 premiers octets) identifie le fabricant de la carte rÃ©seau.

- La deuxiÃ¨me moitiÃ© identifie la carte rÃ©seau elle-mÃªme.

Je peux mÃªme vÃ©rifier sur ce site (en anglais : https://dnschecker.org/mac-lookup.php) quel est le fabricant de ma carte rÃ©seau. Jâ€™indique simplement mon adresse MAC et Ã  partir des 3 premiers octets le site est capable de retrouver Ã  quel constructeur ils correspondent.

Ã€ vous de jouer !

Maintenant que je vous ai montrÃ© comment identifier lâ€™adresse MAC sur une machine, essayez de retrouver :

 - lâ€™adresse MAC dâ€™une de vos cartes rÃ©seau ;

 - le fabricant de cette carte rÃ©seau.

En rÃ©sumÃ©

- Pour communiquer, les machines ont besoin de rÃ¨gles. La rÃ¨gle la plus importante Ã  instaurer est dâ€™identifier 
  chaque Ã©quipement avec une adresse.

- Chaque message qui transite sur le rÃ©seau porte lâ€™adresse de la source et du destinataire du message.

- Lâ€™adresse MAC est un identifiant unique. Cela signifie que deux Ã©quipements dans le monde ne pourront jamais 
  avoir la mÃªme adresse MAC.

- Une adresse MAC est associÃ©e Ã  chaque carte rÃ©seau dâ€™une machine. Une mÃªme machine peut donc avoir plusieurs 
  adresses MAC.

- Lâ€™adresse MAC sâ€™Ã©crit sur 6 octets et nâ€™est pas Ã  dÃ©finir par le technicien : elle est inscrite dans le 
  matÃ©riel Ã  sa sortie dâ€™usine.

Vous savez dÃ©sormais identifier votre machine dans un rÃ©seau local. Passez au chapitre suivant pour dÃ©couvrir comment initier la communication !

#################################################################################################################

Initiez la communication

Envoyez des messages

Dans le chapitre prÃ©cÃ©dent, vous avez appris Ã  identifier vos machines grÃ¢ce Ã  lâ€™adresse MAC. Il vous faut dÃ©sormais les faire communiquer. Communiquer, câ€™est Ã©changer des messages. Ces messages sâ€™appellent des paquets dans le monde des rÃ©seaux. 

Pour vÃ©rifier que la communication fonctionne entre deux machines, vous allez donc gÃ©nÃ©rer un paquet sur la premiÃ¨re machine, et lâ€™envoyer sur la deuxiÃ¨me.

Heuuuu... Et comment je fais concrÃ¨tement ?

Pas de panique ! Voyons cela sur Packet Tracer dans la vidÃ©o ci-dessous :

Simulez une communication sur votre rÃ©seau avec Packet Tracer

Vous revoilÃ  dans votre entreprise de conseil en rÃ©seaux dâ€™entreprise. AprÃ¨s avoir longuement rÃ©flÃ©chi Ã  votre proposition prÃ©cÃ©dente, votre client, M. Falman, accepte votre devis et vous demande de rÃ©aliser lâ€™architecture que vous lui aviez proposÃ©.

Pour rappel, voilÃ  Ã  quoi ressemblait l'architecture complÃ¨te, avec les machines de votre client Ã  gauche et celles de son associÃ©, lâ€™entreprise Cyclade, Ã  droite :

Pour cette mission, votre manager vous propose de travailler en binÃ´me avec un collÃ¨gue plus expÃ©rimentÃ©. Ce dernier a dÃ©jÃ  rÃ©alisÃ© de nombreux projets sur le terrain. Il vous propose de vous occuper de la partie configuration rÃ©seau, tandis que lui sâ€™occupera de lâ€™achat et de lâ€™installation du matÃ©riel.

Pour prÃ©parer au mieux cette intervention, vous dÃ©cidez de tout simuler avec Packet Tracer. Vous aviez dÃ©jÃ  rÃ©alisÃ© toute lâ€™architecture pour Ã©tablir un devis au client. Il ne vous reste plus quâ€™Ã  tester la communication entre les machines.

Le client vous prÃ©cise quâ€™il souhaite conserver ses adresses IP actuelles :

  - 1.1.1.1 pour le serveur ;

  - 1.1.1.2 pour le PC fixe ;

  - 1.1.1.3 pour le PC portable.

Ã€ cette Ã©tape, les adresses IP ne sont pas nÃ©cessaires pour lâ€™acheminement des paquets, car le switch comprend uniquement les adresses MAC. Mais pour gÃ©nÃ©rer un paquet et donc tester la communication, les machines doivent obligatoirement avoir une adresse IP. Nous verrons dans le chapitre suivant de quoi il sâ€™agit exactement.

Ã€ vous de jouer !

Affectez les adresses IP aux 3 machines du client et testez la communication.

Vous devez gÃ©nÃ©rer un paquet sur le PC fixe vers le serveur, et vous assurer quâ€™il arrive Ã  destination.

CorrigÃ©

Vous avez rÃ©ussi Ã  crÃ©er des communications au sein dâ€™un rÃ©seau local. Bravo !

GrÃ¢ce Ã  lâ€™adresse MAC de vos machines, le switch est capable dâ€™identifier dâ€™oÃ¹ vient un message et de lâ€™envoyer dans la bonne direction, câ€™est-Ã -dire sur le bon port.

Alors maintenant câ€™est bon ? Mes machines peuvent communiquer avec nâ€™importe quelle autre machine et communiquer vers Internet ?

Eh non justement ! Pour le moment, vous ne pouvez faire communiquer des machines que dans un rÃ©seau local.

Pour que vos machines aient accÃ¨s Ã  Internet ou simplement Ã  un autre rÃ©seau, il faut que les paquets puissent traverser les rÃ©seaux. Et pour cela, lâ€™adresse MAC ne suffit pas. Il va vous falloir un autre type dâ€™adresse quâ€™on a un peu Ã©voquÃ© et utilisÃ© : lâ€™adresse IP.

En rÃ©sumÃ©

- Les communications au sein dâ€™un rÃ©seau local se font grÃ¢ce Ã  lâ€™adresse MAC. 

- Le switch, lorsquâ€™il reÃ§oit un paquet, est capable de dÃ©terminer, grÃ¢ce Ã  lâ€™adresse MAC, sur lequel de ses 
  ports transmettre le paquet.

- Pour gÃ©nÃ©rer un paquet, on a cependant besoin dâ€™affecter une adresse IP aux machines.

Vous avez configurÃ© des communications dans un rÃ©seau local : bravo ! Rendez-vous dans le chapitre suivant pour en savoir plus sur lâ€™adresse IP.

#################################################################################################################

Identifiez votre machine au sein de plusieurs rÃ©seaux

DÃ©finissez lâ€™adresse IPv4 de votre machine

Reprenons notre analogie avec le courrier. Lorsque vous voulez envoyer un colis, vous devez Ã©crire plusieurs informations pour qu'il arrive Ã  bon port :

    - les nom et prÃ©nom du destinataire ;

    - lâ€™adresse postale du destinataire.

Ces informations identifient le destinataire et elles sont obligatoires. Les nom et prÃ©nom sont utiles localement pour que le facteur dÃ©pose le colis dans la bonne boÃ®te Ã  lettres. Lâ€™adresse postale est utile Ã  plus grande Ã©chelle, pour que le centre de tri postal sache dans quels pays, ville et rue acheminer le colis.

Lorsque vous envoyez un paquet sur Internet, câ€™est presque la mÃªme chose. Le paquet doit toujours contenir en en-tÃªte :

    - une adresse locale : lâ€™adresse MAC ;

    - une adresse globale : lâ€™adresse IP (Internet Protocol).

En informatique, un paquet contient toujours les adresses de la source et du destinataire du message. Pour le courrier postal, seule lâ€™adresse du destinataire est obligatoire.

Il existe diffÃ©rentes versions dâ€™IP. La plus utilisÃ©e est encore actuellement la version 4, abrÃ©gÃ©e en IPv4. 

Comme pour lâ€™adresse MAC, lâ€™adresse IPv4 a des caractÃ©ristiques bien prÃ©cises :

- Elle peut Ãªtre publique ou privÃ©e :

       - les adresses IP privÃ©es sont utilisÃ©es sur les LAN (rÃ©seaux domestiques, dâ€™entrepriseâ€¦) ;

       - les adresses IP publiques sont souvent rÃ©servÃ©es aux opÃ©rateurs de tÃ©lÃ©communication sur les rÃ©seaux de 
         type MAN/WAN (rÃ©seaux nationaux et internationaux).

- Elle est modifiable. Câ€™est mÃªme Ã  vous de la dÃ©finir, contrairement Ã  lâ€™adresse MAC.

- Elle sâ€™Ã©crit sur 4 octets en dÃ©cimal (pas d'hexadÃ©cimal, cette fois).

VoilÃ  Ã  quoi ressemble une adresse IPv4 : 172.16.254.1

Vous voyez quâ€™elle est composÃ©e de 4 parties (4 octets) sÃ©parÃ©es par un point. Chaque partie Ã©tant un octet soit 8 bits. Chaque partie peut prendre une valeur entre 0 et 255.

Nâ€™oubliez pas quâ€™une fois configurÃ©e dans la machine, cette adresse IP sera convertie en binaire car les machines ne parlent quâ€™en binaire. Or en binaire, avec 8 bits, on ne peut compter que de 0 Ã  255.

Vous lâ€™aurez compris, Ã  cette Ã©tape du cours il devient essentiel de savoir convertir les nombres dÃ©cimaux en binaire. 

Lâ€™adresse IP permet dâ€™identifier la localisation gÃ©ographique des machines, ou au moins de savoir Ã  quel rÃ©seau elles appartiennent, contrairement Ã  lâ€™adresse MAC. GrÃ¢ce Ã  elle, on peut souvent localiser les Ã©metteurs et rÃ©cepteurs des messages qui transitent dans un rÃ©seau.

DÃ©finissez le plan dâ€™adressage de votre rÃ©seau

Pour crÃ©er votre propre rÃ©seau, vous devrez choisir les adresses IP que vous allez affecter Ã  vos machines. Câ€™est ce quâ€™on appelle faire un plan dâ€™adressage. Et pour avoir un plan dâ€™adressage cohÃ©rent, vous ne devrez pas choisir vos adresses au hasard.

Si vous travaillez dans un seul et mÃªme rÃ©seau, vous devrez veiller Ã  :

 - ne pas attribuer une adresse IP dÃ©jÃ  existante sur ce rÃ©seau ;

 - attribuer des adresses IP qui soient toutes dans la mÃªme plage dâ€™adresses rÃ©seau.

Une plage dâ€™adresses ? Mais quâ€™est-ce que câ€™est ?

Une plage dâ€™adresses est lâ€™ensemble des adresses IP consÃ©cutives qui sont attribuables aux machines dâ€™un mÃªme rÃ©seau. 

On peut faire le parallÃ¨le avec les codes postaux dâ€™un dÃ©partement. Prenons le Puy-de-DÃ´me, identifiÃ© par le numÃ©ro dÃ©partemental 63. Tous les codes postaux des communes situÃ©es dans ce dÃ©partement doivent Ãªtre entre 63000 et 63999 : câ€™est la plage des codes postaux attribuables.

Mais alors, dans un rÃ©seau informatique, comment Ãªtre sÃ»r que 2 machines ont des adresses IP dans la mÃªme plage ?

La rÃ©ponse tient en un mot : le masque.

Une adresse IP contient toujours :

   - une partie qui identifie le rÃ©seau ;

   - une partie qui identifie la machine.

Le masque est le dÃ©limiteur entre la partie rÃ©seau et la partie machine. Câ€™est ce qui vous permet de vÃ©rifier que deux machines sont bien dans la mÃªme plage rÃ©seau.

Prenons un exemple pour illustrer cela : 172.16.254.1/8

Ici, le masque nous indique que les 8 premiers bits de cette adresse IP (172) sont ceux qui identifient le rÃ©seau, et donc que les 24 derniers (16.254.1) identifient la machine :

Par la mÃªme occasion, le masque nous permet dâ€™en dÃ©duire lâ€™adresse rÃ©seau. Cette adresse rÃ©seau sâ€™obtient en prenant lâ€™adresse IP et en remplaÃ§ant par des â€œ0â€ les bits identifiant la machine. Cela donne ici : 172.0.0.0

OK, super, mais Ã  quoi cela peut-il Ãªtre utile ?

Câ€™est utile car certains Ã©quipements que vous configurerez peuvent avoir besoin de cette adresse rÃ©seau. Vous devez donc Ãªtre en mesure de la trouver.

Maintenant, pour savoir si 2 machines sont dans le mÃªme rÃ©seau IP, câ€™est-Ã -dire dans la mÃªme plage rÃ©seau, il suffit de comparer leurs adresses rÃ©seau :

  - Si elles sont identiques, les machines sont dans le mÃªme rÃ©seau IP. 

  - Si elles sont diffÃ©rentes, les machines sont dans un rÃ©seau IP diffÃ©rent.

Vous avez compris lâ€™idÃ©e ? ;)

Prenons maintenant un cas concret pour illustrer cela.

Imaginez 2 machines dans un rÃ©seau point-Ã -point, câ€™est-Ã -dire reliÃ©es sans switch mais directement par un cÃ¢ble, avec la configuration IP suivante :

Lâ€™adressage des machines est le suivant :

   - La machine A avec lâ€™adresse : 192.168.10.1/24.

   - La machine B avec lâ€™adresse : 192.168.20.3/24.

Le masque nous permet de dire que :

   - les 24 premiers bits sont lâ€™identificateur du rÃ©seau ;

   - les 8 derniers bits sont l'identificateur de la machine.

On peut donc en dÃ©duire que :

   - la machine A est sur le rÃ©seau 192.168.10.0 ;

   - la machine B est sur le rÃ©seau 192.168.20.0.

Les 2 machines Ã©tant sur 2 rÃ©seaux diffÃ©rents, elles ne peuvent pas communiquer.

Si on souhaite conserver le masque en /24, Les adresses IP des machines sont donc mal choisies. Il aurait plutÃ´t fallu affecter Ã  la machine B lâ€™adresse 192.168.10.3/24, par exemple.

Si vous intervenez sur un rÃ©seau existant, vous nâ€™aurez quâ€™Ã  utiliser le masque de ce rÃ©seau. Si, au contraire, vous concevez un nouveau rÃ©seau, vous devrez dÃ©finir vous-mÃªme son masque.

Ah bon ? Mais comment je fais ?

Vous dÃ©finirez le masque de votre rÃ©seau en fonction du nombre de machines prÃ©vues. Plus un masque a une grande valeur, moins vous pourrez mettre de machines dans votre rÃ©seau.

Voyons cela sur un schÃ©ma : 172.16.254.1/8
                            172.16.254.1/16
                            172.16.254.1/24

Vous voyez quâ€™un masque en /8 laisse 24 bits pour identifier des machines. Avec 24 bits, on obtient plus de 16 millions (2^24) dâ€™adresses possibles. Ã€ lâ€™opposÃ©, un masque en /24 ne laisse que 8 bits pour des adresses machines, et donc seulement 256 (2^8) adresses possibles.

Attention, Il faut aussi faire la diffÃ©rence entre le nombre dâ€™adresses IP total et le nombre dâ€™adresses IP attribuables. Par exemple, si on dispose de 8 bits pour les adresses machines, on peut crÃ©er au total 256 adresses IP, mais seulement 254 adresses IP attribuables.

Ah bon ? Mais pourquoi ?

Dans une plage rÃ©seau, la premiÃ¨re et la derniÃ¨re adresse ne sont jamais attribuables Ã  une machine, car elles ont une utilitÃ© bien spÃ©cifique.

  - La premiÃ¨re est lâ€™adresse rÃ©seau (câ€™est ce que nous avons vu plus haut quand nous avons parlÃ© du masque).

  - La derniÃ¨re est lâ€™adresse de diffusion ou de broadcast, en anglais. Elle sert Ã  envoyer un message Ã  toutes 
    les machines dâ€™un rÃ©seau en mÃªme temps. Elle ne peut donc pas Ãªtre affectÃ©e Ã  une machine prÃ©cise.

Quand on souhaite connaÃ®tre le nombre de machines que lâ€™on peut avoir dans un rÃ©seau, il faut donc calculer le nombre dâ€™adresses totales et retrancher 2.

Dans ces exemples, jâ€™ai pris uniquement des masques dont les valeurs sont des multiples de 8 car ce sont les plus courants. Mais en thÃ©orie, vous pouvez tout Ã  fait prendre des valeurs entre 1 et 31.

DerniÃ¨re information importante concernant les masques : ils peuvent sâ€™Ã©crire de 2 maniÃ¨res.

Par exemple, voici le mÃªme masque Ã©crit diffÃ©remment :

  - /24, câ€™est la notation que nous avons vue, quâ€™on appelle notation CIDR (Classless Inter-Domain Routing) ;

  - 255.255.255.0, câ€™est lâ€™ancienne notation quâ€™on trouve encore trÃ¨s souvent.

Pour comprendre le lien entre les 2, il faut passer par le binaire. Si on convertit notre masque 255.255.255.0 en binaire, on obtient 11111111.11111111.11111111.00000000. Ce masque binaire a ses 24 premiers bits Ã  1, voilÃ  pourquoi ce masque peut sâ€™Ã©crire simplement : /24.

La notation CIDR a remplacÃ© la notation standard pour plus de simplicitÃ© et de flexibilitÃ©. Initialement, pour crÃ©er un rÃ©seau, on nâ€™avait que 3 tailles possibles : des rÃ©seaux de 254, 65 534 ou 16 777 204 machines qui correspondent respectivement aux masques 255.255.255.0, 255.255.0.0 et 255.0.0.0. Si on prÃ©voyait un rÃ©seau avec 3 000 machines, on Ã©tait obligÃ© de prendre un rÃ©seau ayant pour masque 255.255.0.0 et acceptant jusquâ€™Ã  65 534 machines.

Le systÃ¨me CIDR a permis dâ€™Ãªtre plus flexible, en autorisant des masques personnalisÃ©s et non surdimensionnÃ©s pour les besoins du rÃ©seau.

Attribuez des adresses IP aux machines de votre rÃ©seau

Vous voilÃ  de retour dans votre mission pour le compte de l'auto-Ã©cole Tinos. Votre binÃ´me de travail vous indique quâ€™il faut changer les adresses IP actuellement dÃ©finies sur les 3 machines de Tinos. Il vous prÃ©cise que le serveur devra avoir comme adresse IP 192.168.0.1/24. C'est Ã  vous de choisir correctement les adresses IP des 2 autres machines.

Pour lâ€™instant, vous nâ€™intervenez pas sur les machines de Cyclade.

Pour rappel, voici lâ€™architecture :

Pour tester la communication entre 2 machines, vous savez dÃ©jÃ  comment gÃ©nÃ©rer un paquet sous Packet Tracer. Il existe cependant une autre mÃ©thode applicable sur tous les systÃ¨mes : la commande ping. Cette commande est universelle et permet dâ€™envoyer un message de test vers une autre machine pour vÃ©rifier quâ€™elle rÃ©pond bien.

Cette commande doit sâ€™utiliser sur la machine qui va envoyer le message ping en prÃ©cisant quelle est lâ€™adresse IP de la machine destinataire.

Par exemple, si je souhaite vÃ©rifier que la communication fonctionne entre ma machine et un serveur Google ayant lâ€™adresse IP 8.8.8.8, dans mon invite de commandes je dois entrer :

ping 8.8.8.8

Si jâ€™obtiens une rÃ©ponse, cela signifie que la communication fonctionne.

Vous pouvez aussi utiliser la commande ping sur les machines de votre rÃ©seau virtuel sous PacketTracer.

Pour cela :

Cliquez sur une des machines terminales de votre rÃ©seau virtuel.

Allez dans lâ€™onglet â€œDesktopâ€.

Cliquez sur â€œCommand Promptâ€.

Vous obtenez un Ã©quivalent de lâ€™invite de commandes Windows qui vous permet dâ€™utiliser des commandes comme ping.

Ã€ vous de jouer !

 1. Configurez lâ€™adresse IP des 3 machines du rÃ©seau de l'auto-Ã©cole Tinos pour quâ€™elles soient sur le mÃªme 
    rÃ©seau IP. Rappel : le serveur doit avoir lâ€™adresse IP 192.168.0.1/24.

 2. Testez la communication entre ces machines.

CorrigÃ©

Lâ€™IP fournie Ã©tant 192.168.0.1/24, la partie rÃ©seau est sur 24 bits, ce qui laisse 8 bits dâ€™IP attribuables aux machines.

Vous pouviez donc choisir des adresses IP allant de 192.168.0.2/24 Ã  192.168.0.254/24

Et pourquoi pas 192.168.0.255 ?

Parce que 192.168.0.255 est lâ€™adresse de broadcast, elle nâ€™est donc pas attribuable, tout comme lâ€™adresse 192.168.0.0 qui est lâ€™adresse du rÃ©seau. Nâ€™oubliez pas : vous ne pouvez jamais attribuer la premiÃ¨re et la derniÃ¨re adresse dâ€™une plage rÃ©seau.

Jusquâ€™Ã  maintenant nous avons uniquement parlÃ© dâ€™un certain type dâ€™adresses IP : les adresses IPv4. Malheureusement, vu lâ€™ampleur dâ€™Internet, il nâ€™est plus possible dâ€™affecter des adresses IPv4 uniques Ã  chaque machine connectÃ©e. Ces adresses vont peu Ã  peu Ãªtre remplacÃ©es par des adresses IPv6, qui, de par leur structure (128 bits au lieu de 32 bits) permettront dâ€™adresser toutes les machines connectÃ©es du monde.

Dans ce cours, nous nous limiterons cependant Ã  IPv4 car ce type dâ€™adresse continuera dâ€™Ãªtre utilisÃ© dans les rÃ©seaux LAN. Les IPv6, elles, seront surtout nÃ©cessaires dans les rÃ©seaux WAN/MAN.

Simulez une architecture grÃ¢ce Ã  Cisco Packet Tracer

De retour dans votre entreprise, vous devez terminer la simulation dâ€™architecture rÃ©seau pour votre client, M. Falman. Vous avez dÃ©jÃ  configurÃ© les adresses IP des 3 machines sur le rÃ©seau du client.

Votre collÃ¨gue est allÃ© sur place pour faire un repÃ©rage. Il vous appelle pour vous indiquer les adresses des 2 postes du rÃ©seau de lâ€™associÃ© :

  - 192.168.100.1/24

  - 192.168.100.2/24

Ã€ vous de jouer !

  1. Configurez ces adresses sur les 2 postes restants.

  2. Testez un envoi de paquet entre les 2 PC du rÃ©seau associÃ©.

  3. Testez un envoi de paquet entre le PC1 et le Serveur0.

CorrigÃ©
Vous pouvez consulter le corrigÃ© pour vÃ©rifier votre travail.

Vous arrivez bien Ã  envoyer un message depuis 192.168.100.1 vers 192.168.100.2.

Par contre, quand vous essayez dâ€™envoyer un message entre 192.168.100.1 et 192.168.0.1, cela ne fonctionne pas. Câ€™est normal ! Ce sont 2 rÃ©seaux diffÃ©rents ; or, il y a un Ã©lÃ©ment que nous nâ€™avons pas encore configurÃ© : le routeur.

En rÃ©sumÃ©

- Lâ€™adresse IP est nÃ©cessaire pour acheminer des messages entre des rÃ©seaux diffÃ©rents.

- Une adresse IPv4 est Ã©crite sur 32 bits, dont une partie sert Ã  identifier le rÃ©seau et lâ€™autre partie Ã  
  identifier la machine.

- Lâ€™adresse IP est toujours associÃ©e Ã  un masque permettant de savoir oÃ¹ est la limite entre lâ€™identifiant du 
  rÃ©seau et lâ€™identifiant de la machine.

- Lâ€™IPv6 va peu Ã  peu prendre le relais de lâ€™IPv4, car il permet de crÃ©er beaucoup plus dâ€™adresses, suffisamment 
  pour toutes les machines connectÃ©s du monde.

- Un plan dâ€™adressage cohÃ©rent doit Ãªtre Ã©laborÃ© lors de la crÃ©ation du rÃ©seau. Il permet de dÃ©finir les adresses 
  IP qui seront affectÃ©es aux machines, et leur nombre.

Vous savez dÃ©sormais adresser des machines dans un rÃ©seau ! DÃ©couvrez comment Ã©tablir lâ€™itinÃ©raire des messages dans le chapitre suivant !

#################################################################################################################

Configurez le routage de votre rÃ©seau

Vous vous souvenez de lâ€™Ã©quipement quâ€™on appelle aussi la passerelle, et qui fait la jonction entre 2 rÃ©seaux ? Câ€™est le fameux routeur. Câ€™est lui qui doit router les paquets, autrement dit, les acheminer vers le bon rÃ©seau.

Identifiez les Ã©tapes pour Ã©tablir lâ€™itinÃ©raire des messages
Pour router correctement les paquets, le routeur dispose dâ€™une table de routage dans sa mÃ©moire interne.

La table de routage est un tableau qui indique au routeur vers quel rÃ©seau envoyer un paquet, en fonction de son adresse IP de destination.

Pour que la table de routage fonctionne, il faut :

 - Activer les interfaces rÃ©seau du routeur. 

Eh oui ! MÃªme si le routeur est sous tension la plupart du temps, il faut activer individuellement les interfaces. Quand on parle dâ€™interface, on fait rÃ©fÃ©rence Ã  un port physique, ici le port RJ45.

 - Configurer une adresse IP Ã  chacune des interfaces activÃ©es.

 - VÃ©rifier et Ã©ventuellement modifier la table de routage.

Dâ€™accord, mais quelle adresse IP dois-je configurer sur le routeur, Ã©tant donnÃ© quâ€™il est le â€œpontâ€ entre plusieurs rÃ©seaux ? On ne peut quand mÃªme pas lui affecter plusieurs adresses IP ?

Eh bien si, justement ! Le routeur a autant dâ€™adresses IP que de rÃ©seaux auxquels il est connectÃ©. Ainsi, chaque port physique ou interface doit Ãªtre configurÃ© avec une adresse IP dans le bon rÃ©seau.Voyons tout de suite un exemple concret pour y voir plus clair !

Configurez le routage dâ€™une architecture simple

Imaginez que lâ€™on cherche Ã  configurer une adresse IP sur les interfaces rÃ©seau des routeurs et sur les PC de cette architecture.

Pour cela, il faut dans un premier temps dÃ©terminer :

 - le nombre de rÃ©seaux prÃ©sents sur lâ€™architecture ;

 - le nombre dâ€™interfaces Ã  configurer.

DÃ©terminez le nombre de rÃ©seaux et dâ€™interfaces

Pour le nombre de rÃ©seaux, câ€™est trÃ¨s simple : on sait quâ€™un routeur dÃ©limite les rÃ©seaux, on peut donc facilement en dÃ©duire quâ€™ici il y en a 3. Pour les interfaces rÃ©seau, nous savons quâ€™il y a une interface Ã  chaque extrÃ©mitÃ© dâ€™un cÃ¢ble, donc 6 au total.

DÃ©finissez les adresses IP manquantes sur le routeur

Les interfaces des 3 PC ont dÃ©jÃ  une adresse IP, il nous reste Ã  dÃ©finir les adresses IP manquantes sur le routeur :

 - Une des interfaces du routeur est dans le mÃªme rÃ©seau que le PC0. Il suffit de lui donner une adresse entre 
   192.168.30.2 et 192.168.30.254. Prenons 192.168.30.254/24.

 - Une des interfaces du routeur est dans le mÃªme rÃ©seau que le PC1. Dans la mÃªme logique, on va lui attribuer 
   lâ€™IP 192.168.10.254/24.

 - Quant Ã  la derniÃ¨re interface, affectons-lui lâ€™adresse 192.168.20.254/24.

Par convention, on a tendance Ã  affecter au routeur une adresse en fin de plage IP. Par exemple, sur le rÃ©seau 192.168.100.0/24, on gardera souvent lâ€™adresse IP 192.168.100.254 pour le routeur. Cela fonctionnera quand mÃªme si vous ne le faites pas, mais autant respecter les conventions pour faciliter la comprÃ©hension de votre schÃ©ma.Par convention, on a tendance Ã  affecter au routeur une adresse en fin de plage IP. Par exemple, sur le rÃ©seau 192.168.100.0/24, on gardera souvent lâ€™adresse IP 192.168.100.254 pour le routeur. Cela fonctionnera quand mÃªme si vous ne le faites pas, mais autant respecter les conventions pour faciliter la comprÃ©hension de votre schÃ©ma.

GÃ©nÃ©rez une table de routage
Venons-en maintenant Ã  la table de routage. Vous nâ€™avez pas besoin de la crÃ©er car le routeur est capable de la gÃ©nÃ©rer tout seul. VoilÃ  Ã  quoi elle va ressembler :

RÃ©seau de destination        RÃ©seau directement connectÃ©       Interface de sortie       Prochain saut

192.168.10.0/24              Oui                               192.168.10.254

192.168.20.0/24              Oui                               192.168.20.254

192.168.30.0/24              Oui                               192.168.30.254


Pas de panique, je vous explique tout de suite de quoi est constituÃ©e cette table !

Elle comporte 3 lignes, câ€™est-Ã -dire 3 routes vers 3 rÃ©seaux diffÃ©rents.

Imaginons quâ€™un paquet Ã  destination de lâ€™adresse 192.168.20.1 arrive sur le routeur. Celui-ci regarde dans sa table de routage sâ€™il existe un rÃ©seau de destination correspondant Ã  lâ€™adresse IP indiquÃ©e sur le paquet. Ici câ€™est le cas, il sâ€™agit du rÃ©seau 192.168.20.0/24.

La table de routage lui prÃ©cise quâ€™il est directement connectÃ© Ã  ce rÃ©seau et que pour acheminer un paquet vers ce rÃ©seau, il doit router le paquet sur son interface portant lâ€™IP 192.168.20.254.

VoilÃ  comment le routeur va rÃ©ussir Ã  acheminer les paquets vers le bon rÃ©seau.

Dâ€™accord, mais Ã  quoi sert la colonne â€œProchain saut ?â€

La colonne â€œprochain sautâ€ servira dans le cas dâ€™architectures plus complexes, comme par exemple celle-ci :

Cette architecture est composÃ©e de 2 routeurs et de 3 rÃ©seaux. Si on regarde la table de routage du Router0, voilÃ  Ã  quoi elle ressemble :

RÃ©seau de destination      RÃ©seau directement connectÃ©       Interface de sortie      Prochain saut

192.168.10.0/24            Oui                               192.168.10.254

10.0.0.0/30                Oui                               10.0.0.1

192.168.20.0/24            Non                               10.0.0.1                 10.0.0.2

Cette table contient 3 routes vers les 3 rÃ©seaux de notre architecture.

Cette fois, si un paquet Ã  destination de 192.168.20.1 arrive sur le Router0, celui-ci voit que le rÃ©seau associÃ© est 192.168.20.0/24. Le routeur nâ€™est pas directement connectÃ© Ã  ce rÃ©seau, et pour lâ€™atteindre il sait quâ€™il va devoir faire passer le paquet par un autre routeur dont lâ€™adresse est 10.0.0.2. Dans une table de routage, cet autre routeur est souvent identifiÃ© comme â€œprochain sautâ€ ou â€œpasserelleâ€.

Mmm. Je crois que je suis un peu perdu avec toutes ces colonnes...

Pas de panique ! Si vous prÃ©fÃ©rez une analogie, on pourrait considÃ©rer le prochain saut comme le prochain poste-frontiÃ¨re dâ€™un itinÃ©raire. Si vous souhaitez aller de la France jusquâ€™au Portugal en passant par la route, votre prochain poste-frontiÃ¨re sera celui Ã  lâ€™entrÃ©e de lâ€™Espagne.

Dans une table de routage, les routes vers les rÃ©seaux directement connectÃ©s sont toujours gÃ©nÃ©rÃ©es automatiquement. En revanche, pour les routes vers les rÃ©seaux distants, cela dÃ©pendra de la configuration de vos routeurs. Certains mÃ©canismes permettent aux routeurs dâ€™apprendre les routes automatiquement.

Sâ€™il ne sont pas mis en place sur votre architecture, il faudra ajouter les routes manuellement. Pour cela, il faut se plonger dans la documentation de configuration de vos Ã©quipements, et apprendre Ã  utiliser lâ€™interface en ligne de commandes.

En rÃ©sumÃ©

- Lorsquâ€™un paquet est envoyÃ© dâ€™un rÃ©seau IP vers un autre, il passe obligatoirement par un routeur. Ce dernier 
  est la â€œpasserelle par dÃ©fautâ€ ; 

- Chaque interface rÃ©seau du routeur doit Ãªtre activÃ©e et avoir une adresse IP 

- La table de routage enregistrÃ©e dans un routeur permet Ã  celui-ci dâ€™envoyer un paquet vers le bon rÃ©seau. Elle 
  liste tous les rÃ©seaux connus du routeur et la route Ã  prendre pour les atteindre ;

- Quand un routeur reÃ§oit un paquet, il regarde lâ€™adresse IP de destination inscrite dans le paquet et la compare 
  avec les rÃ©seaux connus dans sa table de routage. Il sait alors vers oÃ¹ envoyer ce paquet.

Vous savez maintenant comment configurer le routage sur une architecture simple ğŸ¥³ Il ne vous reste plus qu'Ã  indiquer une passerelle Ã  vos machines ! Suivez-moi dans le prochain chapitre pour dÃ©couvrir comment faire.

#################################################################################################################

Indiquez une passerelle par dÃ©faut aux Ã©quipements terminaux

Nous venons de voir que câ€™est le routeur, grÃ¢ce Ã  sa table de routage qui se charge de relayer les paquets dâ€™un rÃ©seau vers un autre. Jusque lÃ , nous nâ€™en avons pas eu besoin car nous simulions uniquement des communications au sein dâ€™un mÃªme rÃ©seau IP. Dans ce contexte, le routeur nâ€™a donc aucune utilitÃ©.

Par contre, dÃ¨s quâ€™une machine veut envoyer un paquet vers dâ€™autres rÃ©seaux, il faut lui prÃ©ciser lâ€™adresse IP du routeur ou passerelle qui va relayer le paquet  vers son rÃ©seau de destination. Si on reprend le rÃ©seau prÃ©cÃ©dent, il ne reste donc plus quâ€™Ã  indiquer aux 3 PC quelle sera leur passerelle par dÃ©faut.

Machine            Interface de sortie             Passerelle par dÃ©faut

PC0                192.168.30.1                    192.168.30.254

PC1                192.168.10.1                    192.168.10.254

PC2                192.168.20.1                    192.168.20.254

Rejoignez-moi dans la vidÃ©o ci-dessous, je vais vous montrer comment faire !

Veillez toujours Ã  indiquer la passerelle par dÃ©faut Ã  vos Ã©quipements terminaux. Cela peut paraÃ®tre assez futile lorsque vos PCs nâ€™ont quâ€™une seule interface rÃ©seau car il nâ€™y quâ€™une seule â€œporte de sortie possibleâ€ pour les paquets. Mais souvenez-vous que mÃªme votre propre PC peut avoir plusieurs interfaces rÃ©seau. PrÃ©ciser une passerelle par dÃ©faut devient alors indispensable pour indiquer quelle interface rÃ©seau de sortie utiliser par dÃ©faut pour envoyer un paquet.

Configurez vos Ã©quipements avec Cisco Packet Tracer

Ã‡a y est ! Vous avez enfin toutes les clÃ©s en main pour mener Ã  bien votre mission auprÃ¨s de l'auto-Ã©cole Tinos.

VoilÃ  lâ€™architecture lÃ  oÃ¹ vous lâ€™avez laissÃ©e :

A cette Ã©tape, vous avez :

  - crÃ©Ã© lâ€™architecture du rÃ©seau avec tous les Ã©quipements et cÃ¢bles nÃ©cessaires

  - attribuÃ© une adresse IP Ã  tous les Ã©quipement terminaux

La prochaine Ã©tape ? Configurer les PC de lâ€™entreprise Cyclade pour quâ€™ils puissent accÃ©der au serveur de l'auto-Ã©cole Tinos.

Ã€ vous de jouer !

